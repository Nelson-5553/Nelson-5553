<nav class="fixed top-0 left-0 w-full backdrop-blur-md border-gray-200 z-50">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
      <img src="/img/N5553.png" class="h-8 rounded-full" alt="Logo" />
      <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Nelson-5553</span>
    </a>
    <div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
      <button id="theme-toggle" class="px-1 py-1 rounded-sm text-gray-800 dark:text-gray-200">
        <!-- Sun Icon -->
        <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="hidden">
          <path fill="currentColor" d="M20.958 15.325c.204-.486-.379-.9-.868-.684a7.7 7.7 0 0 1-3.101.648c-4.185 0-7.577-3.324-7.577-7.425a7.3 7.3 0 0 1 1.134-3.91c.284-.448-.057-1.068-.577-.936C5.96 4.041 3 7.613 3 11.862C3 16.909 7.175 21 12.326 21c3.9 0 7.24-2.345 8.632-5.675"></path>
          <path fill="currentColor" d="M15.611 3.103c-.53-.354-1.162.278-.809.808l.63.945a2.33 2.33 0 0 1 0 2.588l-.63.945c-.353.53.28 1.162.81.808l.944-.63a2.33 2.33 0 0 1 2.588 0l.945.63c.53.354 1.162-.278.808-.808l-.63-.945a2.33 2.33 0 0 1 0-2.588l.63-.945c.354-.53-.278-1.162-.809-.808l-.944.63a2.33 2.33 0 0 1-2.588 0z"></path>
        </svg>
        <!-- Moon Icon -->
        <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="currentColor" d="M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path>
          <path fill="currentColor" fill-rule="evenodd" d="M9.017 2.8a1 1 0 0 0-1.562.664l-.442 2.82a1 1 0 0 1-.815.831l-2.812.493a1 1 0 0 0-.636 1.574l1.683 2.306a1 1 0 0 1 .01 1.164l-1.64 2.337a1 1 0 0 0 .664 1.562l2.82.442a1 1 0 0 1 .83.815l.493 2.812a1 1 0 0 0 1.574.636l2.307-1.683a1 1 0 0 1 1.164-.01l2.336 1.64a1 1 0 0 0 1.563-.664l.44-2.82a1 1 0 0 1 .817-.83l2.812-.493a1 1 0 0 0 .635-1.574l-1.682-2.307a1 1 0 0 1-.011-1.164l1.64-2.336a1 1 0 0 0-.663-1.563l-2.821-.441a1 1 0 0 1-.83-.816l-.493-2.812a1 1 0 0 0-1.574-.635L12.518 4.43a1 1 0 0 1-1.164.01zM17 12a5 5 0 1 1-10 0a5 5 0 0 1 10 0" clip-rule="evenodd"></path>
        </svg>
      </button>
      <button id="mobile-menu-button" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
        <span class="sr-only">Open main menu</span>
        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path>
        </svg>
      </button>
    </div>
    <div id="navbar-menu" class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1 backdrop-blur-md">
      <ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0">
        <li>
          <a href="/sections/personal" class="block py-2 px-3 md:p-0 prose dark:prose-invert" aria-current="page">¿Quien soy?</a>
        </li>
        <li>
          <a href="/sections/proyectos" class="block py-2 px-3 md:p-0 prose dark:prose-invert">Proyectos</a>
        </li>
        <li>
          <a href="/sections/habilities" class="block py-2 px-3 md:p-0 prose dark:prose-invert">Habilidades</a>
        </li>
        <li>
          <a href="/sections/estudios" class="block py-2 px-3 md:p-0 prose dark:prose-invert">Estudios</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<script is:inline type="module">
  function ToggleStart() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const navbarMenu = document.getElementById('navbar-menu');

    if (!mobileMenuButton || !navbarMenu) return;

    const handleMenuToggle = () => {
      navbarMenu.classList.toggle('hidden');
    };

    const handleClickOutside = (e) => {
      if (!navbarMenu.contains(e.target) && !mobileMenuButton.contains(e.target)) {
        navbarMenu.classList.add('hidden');
      }
    };

    const handleResize = () => {
      if (window.innerWidth >= 768) {
        navbarMenu.classList.remove('hidden');
      } else {
        navbarMenu.classList.add('hidden');
      }
    };

    mobileMenuButton.addEventListener('click', handleMenuToggle);
    document.addEventListener('click', handleClickOutside);
    window.addEventListener('resize', handleResize);
  }

  // Ejecutar al cargar inicialmente
  ToggleStart();

  // Re-ejecutar después de cada navegación
  document.addEventListener('astro:after-swap', ToggleStart);
</script>