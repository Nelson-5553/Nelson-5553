---
import { Image } from "astro:assets"
import N5553 from "/public/img/N5553.png"
import NavMenu from "../components/NavMenu.astro"
---

<header class="absolute inset-x-0 top-0 z-50">
<div class="flex justify-center">
  <nav class="fixed flex items-center justify-center backdrop-blur-md shadow-xl h-auto w-auto rounded-full mt-6 py-0.5 lg:px-8 space-x-4" aria-label="Global">
    <div class="flex lg:hidden">
      <button
        id="menu-open"
        type="button"
        onclick="toggleMenu()"
        class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700"
      >
        <span class="sr-only">Open main menu</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
        </svg>
      </button>
    </div>
    <div class="hidden lg:flex lg:gap-x-6">
      <NavMenu  Ruta="#sobre-mi" Name="Sobre mi" />
      <NavMenu  Ruta="#estudios" Name="Estudios" />
      <NavMenu  Ruta="#habilidades" Name="Habilidades" />
      <NavMenu  Ruta="#proyecto" Name="Proyectos" />
      <NavMenu  Ruta="#contactame" Name="Contactame" />
    </div>
    <div>
      <button
        id="theme-toggle"
        class="mt-3 rounded-sm text-gray-800 dark:text-gray-200"
      >
        <!-- Sun Icon -->
        <svg
          id="sun-icon"
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          class="hidden"
        >
          <path
            fill="currentColor"
            d="M20.958 15.325c.204-.486-.379-.9-.868-.684a7.7 7.7 0 0 1-3.101.648c-4.185 0-7.577-3.324-7.577-7.425a7.3 7.3 0 0 1 1.134-3.91c.284-.448-.057-1.068-.577-.936C5.96 4.041 3 7.613 3 11.862C3 16.909 7.175 21 12.326 21c3.9 0 7.24-2.345 8.632-5.675"
          ></path>
          <path
            fill="currentColor"
            d="M15.611 3.103c-.53-.354-1.162.278-.809.808l.63.945a2.33 2.33 0 0 1 0 2.588l-.63.945c-.353.53.28 1.162.81.808l.944-.63a2.33 2.33 0 0 1 2.588 0l.945.63c.53.354 1.162-.278.808-.808l-.63-.945a2.33 2.33 0 0 1 0-2.588l.63-.945c.354-.53-.278-1.162-.809-.808l-.944.63a2.33 2.33 0 0 1-2.588 0z"
          ></path>
        </svg>
        <!-- Moon Icon -->
        <svg
          id="moon-icon"
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
        >
          <path fill="currentColor" d="M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"
          ></path>
          <path
            fill="currentColor"
            fill-rule="evenodd"
            d="M9.017 2.8a1 1 0 0 0-1.562.664l-.442 2.82a1 1 0 0 1-.815.831l-2.812.493a1 1 0 0 0-.636 1.574l1.683 2.306a1 1 0 0 1 .01 1.164l-1.64 2.337a1 1 0 0 0 .664 1.562l2.82.442a1 1 0 0 1 .83.815l.493 2.812a1 1 0 0 0 1.574.636l2.307-1.683a1 1 0 0 1 1.164-.01l2.336 1.64a1 1 0 0 0 1.563-.664l.44-2.82a1 1 0 0 1 .817-.83l2.812-.493a1 1 0 0 0 .635-1.574l-1.682-2.307a1 1 0 0 1-.011-1.164l1.64-2.336a1 1 0 0 0-.663-1.563l-2.821-.441a1 1 0 0 1-.83-.816l-.493-2.812a1 1 0 0 0-1.574-.635L12.518 4.43a1 1 0 0 1-1.164.01zM17 12a5 5 0 1 1-10 0a5 5 0 0 1 10 0"
            clip-rule="evenodd"></path>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="hidden lg:hidden fixed inset-0 z-50 bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10">
    <div class="flex items-center justify-between">
      <a href="#" class="-m-1.5 p-1.5">
        <span class="sr-only">Your Company</span>
        <Image class="h-8 w-auto" src={N5553} alt="N5553" />
      </a>
      <button type="button" onclick="toggleMenu()" class="-m-2.5 rounded-md p-2.5 text-gray-700">
        <span class="sr-only">Close menu</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="mt-6 flow-root">
      <div class="-my-6 divide-y divide-gray-500/10">
        <div class="space-y-2 py-6">
          <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">Sobre mi</a>
          <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">Habilidades</a>
          <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">Proyectos</a>
          <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">Titulos</a>
          <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">Contactame</a>
        </div>
      </div>
    </div>
  </div>
</div>
</header>

<script is:inline type="module">
  function ToggleStart() {
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const navbarMenu = document.getElementById("navbar-menu");

    if (!mobileMenuButton || !navbarMenu) return;

    const handleMenuToggle = () => {
      navbarMenu.classList.toggle("hidden");
    };

    const handleClickOutside = (e) => {
      if (
        !navbarMenu.contains(e.target) &&
        !mobileMenuButton.contains(e.target)
      ) {
        navbarMenu.classList.add("hidden");
      }
    };

    const handleResize = () => {
      if (window.innerWidth >= 768) {
        navbarMenu.classList.remove("hidden");
      } else {
        navbarMenu.classList.add("hidden");
      }
    };

    mobileMenuButton.addEventListener("click", handleMenuToggle);
    document.addEventListener("click", handleClickOutside);
    window.addEventListener("resize", handleResize);
  }

  // Ejecutar al cargar inicialmente
  ToggleStart();

  // Re-ejecutar después de cada navegación
  document.addEventListener("astro:after-swap", ToggleStart);
</script>

